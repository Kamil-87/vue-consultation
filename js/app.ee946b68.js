(function(t){function e(e){for(var i,r,o=e[0],c=e[1],l=e[2],d=0,f=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&f.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(f.length)f.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(i=!1)}i&&(s.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},a={app:0},s=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/vue-consultation/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"070c":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-snackbar",{staticClass:"mt-15",attrs:{timeout:3e3,color:t.infoStatus.status,top:"",right:"","min-width":"250px"},model:{value:t.infoStatus.snackbar,callback:function(e){t.$set(t.infoStatus,"snackbar",e)},expression:"infoStatus.snackbar"}},[t._v(" "+t._s(t.infoStatus.text)+" ")]),n("Navbar"),n("v-main",[n("router-view")],1)],1)},s=[],r=n("5530"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",[n("v-app-bar",{attrs:{flat:"",app:"",dark:"",color:"primary"}},[n("v-container",[n("v-app-bar-title",{staticClass:"text-uppercase"},[n("router-link",{attrs:{to:"/"}},[n("v-btn",{attrs:{outlined:""}},[t._v(" Пациенты ")])],1)],1),n("v-spacer")],1)],1)],1)},c=[],l={components:{},data:function(){return{drawer:!1,links:[{text:"patients",route:"/"}],snackbar:!1}}},u=l,d=n("2877"),f=n("6544"),m=n.n(f),h=n("40dc"),p=n("bb78"),v=n("8336"),b=n("a523"),y=n("2fa4"),g=Object(d["a"])(u,o,c,!1,null,null,null),I=g.exports;m()(g,{VAppBar:h["a"],VAppBarTitle:p["a"],VBtn:v["a"],VContainer:b["a"],VSpacer:y["a"]});var x=n("2f62"),$={name:"App",components:{Navbar:I},computed:Object(r["a"])({},Object(x["c"])(["infoStatus"])),mounted:function(){null==localStorage.getItem("patients")&&(this.fetchPatients(),this.fetchConsultation())},methods:Object(r["a"])({},Object(x["b"])(["fetchPatients","fetchConsultation"]))},C=$,_=n("7496"),k=n("f6c4"),w=n("2db4"),S=Object(d["a"])(C,a,s,!1,null,null,null),N=S.exports;m()(S,{VApp:_["a"],VMain:k["a"],VSnackbar:w["a"]});var O=n("8c4f"),V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-card",[n("v-card-title",{staticClass:"mb-5"},[t._v(" Пациенты "),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Поиск по СНИЛС или по фамилии","single-line":"","hide-details":""},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1),n("v-card-text",[n("v-btn",{staticClass:"mb-5",attrs:{color:"primary"},on:{click:function(e){return t.addPatient()}}},[t._v(" Добавить пациента ")]),n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",{staticClass:"table-head"},[n("th",{staticClass:"text-left",on:{click:t.sortLastname}},[t._v(" ФИО ")]),n("th",{staticClass:"text-left",on:{click:t.sortBirthday}},[t._v(" День рождения ")]),n("th",{staticClass:"text-left",on:{click:t.sortGender}},[t._v(" Пол ")]),n("th",{staticClass:"text-left",on:{click:t.sortSnils}},[t._v(" СНИЛС ")]),n("th",{staticClass:"text-left"},[t._v(" Действия ")])])]),n("tbody",t._l(t.filteredPatients,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.lastName+" "+e.firstName))]),n("td",[t._v(t._s(e.birthday))]),n("td",[t._v(t._s(e.gender))]),n("td",[t._v(t._s(e.snils))]),n("td",[n("v-btn",{staticClass:"mx-1",attrs:{icon:"",small:"",fab:"",color:"primary"},on:{click:function(n){return t.detailedPatient(e.id)}}},[n("v-icon",{attrs:{dark:""}},[t._v(" mdi-open-in-new ")])],1),n("v-btn",{staticClass:"mx-1",attrs:{icon:"",small:"",fab:"",color:"primary"},on:{click:function(n){return t.editPatient(e.id)}}},[n("v-icon",{attrs:{dark:""}},[t._v(" mdi-pencil ")])],1),n("v-btn",{staticClass:"mx-1",attrs:{icon:"",small:"",fab:"",color:"error"},on:{click:function(n){return t.deletePatient(e.id)}}},[n("v-icon",{attrs:{dark:""}},[t._v(" mdi-delete ")])],1)],1)])})),0)]},proxy:!0}])})],1)],1)],1)},j=[],P=(n("4de4"),n("caad"),n("2532"),n("4e827"),{data:function(){return{searchValue:""}},computed:Object(r["a"])(Object(r["a"])({},Object(x["c"])({patients:"patients"})),{},{filteredPatients:function(){var t=this;return this.patients.filter((function(e){return e.lastName.toLowerCase().includes(t.searchValue.toLowerCase())||e.snils.toLowerCase().includes(t.searchValue.toLowerCase())}))}}),methods:Object(r["a"])(Object(r["a"])({},Object(x["b"])(["fetchPatients","deletePatient"])),{},{detailedPatient:function(t){this.$router.push({name:"Patient",params:{id:t}})},addPatient:function(){this.$router.push({name:"PatientAdd"})},editPatient:function(t){this.$router.push({name:"PatientEdit",params:{id:t}})},deletePatient:function(t){this.$store.dispatch("deletePatient",t)},sortLastname:function(){this.patients.sort((function(t,e){return t.lastName.localeCompare(e.lastName)}))},sortSnils:function(){console.log("snils"),this.patients.sort((function(t,e){return t.snils.localeCompare(e.snils)}))},sortGender:function(){this.patients.sort((function(t,e){return t.gender.localeCompare(e.gender)}))},sortBirthday:function(){this.patients.sort((function(t,e){return t.birthday.localeCompare(e.birthday)}))}})}),E=P,T=(n("bf9f"),n("b0af")),D=n("99d9"),q=n("132d"),L=n("1f4f"),M=n("8654"),B=Object(d["a"])(E,V,j,!1,null,"15c566d0",null),J=B.exports;m()(B,{VBtn:v["a"],VCard:T["a"],VCardText:D["a"],VCardTitle:D["b"],VContainer:b["a"],VIcon:q["a"],VSimpleTable:L["a"],VSpacer:y["a"],VTextField:M["a"]});var F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.patient?n("v-container",[n("v-btn",{attrs:{color:"primary"},on:{click:t.editPatient}},[t._v("Редактировать данные пациента ")]),n("v-spacer",{staticClass:"mb-5"}),n("v-card",{staticClass:"mb-5"},[n("v-card-title",[t._v(t._s(t.patient.lastName+" "+t.patient.firstName+" "+t.patient.patronymic))]),n("v-list",[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",[t._v(t._s("Возраст - "+t.age+" "))]),n("v-list-item-title",[t._v(t._s("Пол - "+t.patient.gender+" "))]),n("v-list-item-title",[t._v(t._s("СНИЛС - "+t.patient.snils+" "))])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s("Рост - "+t.patient.height+" "))]),n("v-list-item-title",[t._v(t._s("Вес - "+t.patient.weight+" "))]),n("v-list-item-title",[t._v(t._s("День рождения - "+t.patient.birthday+" "))])],1)],1)],1)],1),n("v-btn",{attrs:{color:"primary"},on:{click:t.addConsultation}},[t._v("Добавить консультацию ")]),n("v-spacer",{staticClass:"mb-5"}),n("ConsultationAddOrEdit"),n("v-card",[n("v-card-title",[t._v("Назначенные приемы")]),n("v-card-text",[n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v(" Специалист ")]),n("th",{staticClass:"text-center"},[t._v(" Дата посещения ")]),n("th",{staticClass:"text-left"},[t._v(" Симптомы ")]),n("th",{staticClass:"text-right"},[t._v(" Действия ")])])]),n("tbody",t._l(t.consultationsByUser,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.specialist))]),n("td",{staticClass:"text-center"},[t._v(t._s(e.day+" "+e.time+" "))]),n("td",[t._v(t._s(e.symptoms))]),n("td",{staticClass:"text-right"},[n("v-btn",{staticClass:"mx-1",attrs:{icon:"",small:"",fab:"",color:"primary"},on:{click:function(n){return t.editConsultation(e.id)}}},[n("v-icon",{attrs:{dark:""}},[t._v(" mdi-pencil ")])],1),n("v-btn",{staticClass:"mx-1",attrs:{icon:"",small:"",fab:"",color:"error"},on:{click:function(n){return t.deleteConsultation(e.id)}}},[n("v-icon",{attrs:{dark:""}},[t._v(" mdi-delete ")])],1)],1)])})),0)]},proxy:!0}],null,!1,2013572790)})],1)],1)],1):t._e()},U=[],A=(n("a15b"),n("ac1f"),n("1276"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"max-width":"600"},on:{"click:outside":function(e){return t.$store.commit("hideConsultationDialog")}},model:{value:t.$store.getters.addConsultationDialogVisible,callback:function(e){t.$set(t.$store.getters,"addConsultationDialogVisible",e)},expression:"$store.getters.addConsultationDialogVisible"}},[n("v-snackbar",{staticClass:"mt-15",attrs:{timeout:2e3,color:t.status,top:"","min-width":"250px"},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")]),n("v-card",[n("v-card-title",{staticClass:"subheading grey--text mb-5"},[t._v(" "+t._s(t.isEdit?"Редактирование консультации":"Добавление консультации")+" ")]),n("v-card-text",[n("form",[n("v-select",{attrs:{items:t.specialists,"error-messages":t.selectErrors,label:"Выберите специалиста","prepend-inner-icon":"mdi-account-supervisor",required:""},on:{change:function(e){return t.$v.select.$touch()},blur:function(e){return t.$v.select.$touch()}},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}}),n("v-menu",{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[n("v-text-field",t._g(t._b({attrs:{value:t.formattedDay(t.day),clearable:"",label:"Дата консультации","prepend-inner-icon":"mdi-calendar","error-messages":t.dayErrors,readonly:"",required:""},on:{"click:clear":function(e){t.day=null}}},"v-text-field",a,!1),i))]}}]),model:{value:t.menuDate,callback:function(e){t.menuDate=e},expression:"menuDate"}},[n("v-date-picker",{attrs:{min:t.dateToday,locale:"ru-ru"},on:{change:function(e){t.menuDate=!1}},model:{value:t.day,callback:function(e){t.day=e},expression:"day"}})],1),n("v-menu",{ref:"menuTime",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.time,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(e){t.time=e},"update:return-value":function(e){t.time=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[n("v-text-field",t._g(t._b({attrs:{label:"Время консультации","prepend-inner-icon":"mdi-clock-time-four-outline","error-messages":t.timeErrors,readonly:"",required:""},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}},"v-text-field",a,!1),i))]}}]),model:{value:t.menuTime,callback:function(e){t.menuTime=e},expression:"menuTime"}},[t.menuTime?n("v-time-picker",{attrs:{"allowed-minutes":t.allowedStep,format:"24hr",min:"8:00",max:"19:45","full-width":""},on:{"click:minute":function(e){return t.$refs.menuTime.save(t.time)}},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}):t._e()],1),n("v-textarea",{attrs:{label:"Симптомы",rows:"3","prepend-inner-icon":"mdi-comment",counter:2048,maxlength:"2048","error-messages":t.symptomsErrors},model:{value:t.symptoms,callback:function(e){t.symptoms=e},expression:"symptoms"}}),n("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:t.submitHandler}},[t._v(" "+t._s(t.isEdit?"Сохранить":"Добавить")+" ")]),n("v-btn",{on:{click:t.clear}},[t._v(" Очистить ")])],1)])],1)],1)}),H=[],G=(n("99af"),n("7db0"),n("1dce")),z=n.n(G),K=n("b5ae"),Q=n("b166"),R=n("e3ee"),W={mixins:[G["validationMixin"]],validations:{select:{required:K["required"]},day:{required:K["required"]},time:{required:K["required"]},symptoms:{maxLength:Object(K["maxLength"])(2048)}},data:function(){return{text:"Text",snackbar:!1,status:"",menuDate:!1,menuTime:!1,day:null,time:null,select:"",specialists:["Терапевт","Стоматолог","Гастроэнтеролог","Невролог","ЛОР"],symptoms:"",isEdit:!1}},watch:{currentConsultationId:function(){this.refreshConsultation(this.currentConsultationId)}},computed:Object(r["a"])(Object(r["a"])({},Object(x["c"])(["currentConsultationId","consultationById","addConsultationDialogVisible","consultations"])),{},{selectErrors:function(){var t=[];return this.$v.select.$dirty?(!this.$v.select.required&&t.push("Поле обязательно для заполнения"),t):t},dayErrors:function(){var t=[];return this.$v.day.$dirty?(!this.$v.day.required&&t.push("Поле обязательно для заполнения"),t):t},timeErrors:function(){var t=[];return this.$v.time.$dirty?(!this.$v.time.required&&t.push("Поле обязательно для заполнения"),t):t},symptomsErrors:function(){var t=[];return this.$v.symptoms.$dirty?(!this.$v.symptoms.maxLength&&t.push("Не больше 2048 символов"),t):t},dateToday:function(){return Object(Q["a"])(Date.now(),"yyyy-MM-dd")}}),methods:Object(r["a"])(Object(r["a"])({},Object(x["d"])(["hideConsultationDialog"])),{},{allowedStep:function(t){return t%15===0},formattedDay:function(t){return t?Object(Q["a"])(Object(R["a"])(t),"dd-MM-yyyy"):""},formatToIso:function(t){return t.split("-").reverse().join("-")},showStatusMessage:function(t,e){var n={};n.text=e,n.status=t,n.snackbar=!0,this.$store.dispatch("showStatusMessage",n),console.log("show message",n)},refreshConsultation:function(t){if(this.isEdit=null!==t,this.isEdit){var e=this.consultationById(t);this.select=e.specialist,this.day=this.formatToIso(e.day),this.time=e.time,this.symptoms=e.symptoms}else this.select="",this.day="",this.time="",this.symptoms=""},timeIsNotSelected:function(){var t=this,e=new Date("".concat(this.day,"T").concat(this.time));return this.consultations.find((function(n){var i=new Date("".concat(t.formatToIso(n.day),"T").concat(n.time));return i.getTime()===e.getTime()}))},submitHandler:function(){var t=this;if(this.$v.$invalid)this.$v.$touch();else try{var e={id:this.isEdit?this.currentConsultationId:Date.now(),day:this.formattedDay(this.day),time:this.time,symptoms:this.symptoms,specialist:this.select,idUser:parseInt(this.$route.params.id)};if(console.log(this.timeIsNotSelected()),void 0!==this.timeIsNotSelected())return this.text="Время занято, выберите другое время",this.status="warning",void(this.snackbar=!0);this.isEdit?(this.$store.dispatch("updateConsultation",e),this.text="Данные успешно обновлены!",this.status="success",this.snackbar=!0):(this.$store.dispatch("createConsultation",e),this.text="Данные успешно добавлены!",this.status="success",this.snackbar=!0),setTimeout((function(){return t.hideConsultationDialog()}),2e3)}catch(n){console.log(n),this.text="Ошибка",this.status="error",this.snackbar=!0,setTimeout((function(){return t.hideConsultationDialog()}),2e3)}},clear:function(){this.$v.$reset(),this.select="",this.day=null,this.time=null,this.symptoms=""}})},X=W,Y=n("2e4b"),Z=n("169a"),tt=n("e449"),et=n("b974"),nt=n("a844"),it=n("c964"),at=Object(d["a"])(X,A,H,!1,null,"61025a5e",null),st=at.exports;m()(at,{VBtn:v["a"],VCard:T["a"],VCardText:D["a"],VCardTitle:D["b"],VDatePicker:Y["a"],VDialog:Z["a"],VMenu:tt["a"],VSelect:et["a"],VSnackbar:w["a"],VTextField:M["a"],VTextarea:nt["a"],VTimePicker:it["a"]});var rt={components:{ConsultationAddOrEdit:st},data:function(){return{}},computed:Object(r["a"])(Object(r["a"])({},Object(x["c"])({consultations:"consultations"})),{},{patient:function(){return this.$store.getters.patientById(this.$route.params.id)},consultationsByUser:function(){return this.$store.getters.consultationsByUser(this.patient.id)},formatToIso:function(){return this.patient.birthday.split("-").reverse().join("-")},age:function(){return(Date.now()-new Date(this.formatToIso))/315576e5|0}}),methods:Object(r["a"])(Object(r["a"])({},Object(x["d"])(["showConsultationDialog"])),{},{editPatient:function(){this.$router.push({name:"PatientEdit",params:{id:this.$route.params.id}})},addConsultation:function(){this.showConsultationDialog(null)},editConsultation:function(t){this.showConsultationDialog(t)},deleteConsultation:function(t){this.$store.dispatch("deleteConsultation",t)}})},ot=rt,ct=n("8860"),lt=n("da13"),ut=n("5d23"),dt=Object(d["a"])(ot,F,U,!1,null,"d893b714",null),ft=dt.exports;m()(dt,{VBtn:v["a"],VCard:T["a"],VCardText:D["a"],VCardTitle:D["b"],VContainer:b["a"],VIcon:q["a"],VList:ct["a"],VListItem:lt["a"],VListItemContent:ut["a"],VListItemTitle:ut["b"],VSimpleTable:L["a"],VSpacer:y["a"]});var mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("h1",{staticClass:"subheading grey--text mb-5"},[t._v(t._s(t.isEdit?"Редактировать данные пациента":"Добавить данные пациента"))]),n("form",[n("v-text-field",{attrs:{"error-messages":t.lastNameErrors,counter:t.nameLength,label:"Фамилия *",required:""},on:{input:function(e){return t.$v.patientInfo.lastName.$touch()},blur:function(e){return t.$v.patientInfo.lastName.$touch()}},model:{value:t.patientInfo.lastName,callback:function(e){t.$set(t.patientInfo,"lastName",e)},expression:"patientInfo.lastName"}}),n("v-text-field",{attrs:{"error-messages":t.firstNameErrors,counter:t.nameLength,label:"Имя *",required:""},on:{input:function(e){return t.$v.patientInfo.firstName.$touch()},blur:function(e){return t.$v.patientInfo.firstName.$touch()}},model:{value:t.patientInfo.firstName,callback:function(e){t.$set(t.patientInfo,"firstName",e)},expression:"patientInfo.firstName"}}),n("v-text-field",{attrs:{"error-messages":t.patronymicErrors,counter:t.nameLength,label:"Отчество"},on:{input:function(e){return t.$v.patientInfo.patronymic.$touch()},blur:function(e){return t.$v.patientInfo.patronymic.$touch()}},model:{value:t.patientInfo.patronymic,callback:function(e){t.$set(t.patientInfo,"patronymic",e)},expression:"patientInfo.patronymic"}}),n("v-text-field",{attrs:{"error-messages":t.snilsErrors,placeholder:"___-___-___ __ ",label:"СНИЛС *",maxlength:"14"},on:{keyup:t.validateSnils,input:function(e){return t.$v.patientInfo.snils.$touch()},blur:function(e){return t.$v.patientInfo.snils.$touch()}},model:{value:t.patientInfo.snils,callback:function(e){t.$set(t.patientInfo,"snils",e)},expression:"patientInfo.snils"}}),n("v-menu",{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[n("v-text-field",t._g(t._b({attrs:{value:t.formattedBirthday,clearable:"",label:"Дата рождения *","prepend-inner-icon":"mdi-calendar","error-messages":t.birthdayErrors,readonly:""},on:{"click:clear":function(e){t.patientInfo.birthday=null}}},"v-text-field",a,!1),i))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[n("v-date-picker",{attrs:{locale:"ru-ru",max:t.dateToday},on:{change:function(e){t.menu=!1}},model:{value:t.patientInfo.birthday,callback:function(e){t.$set(t.patientInfo,"birthday",e)},expression:"patientInfo.birthday"}})],1),n("v-select",{attrs:{items:t.patientInfo.gender,"error-messages":t.selectErrors,label:"Ваш пол *",required:""},on:{change:function(e){return t.$v.patientInfo.select.$touch()},blur:function(e){return t.$v.patientInfo.select.$touch()}},model:{value:t.patientInfo.select,callback:function(e){t.$set(t.patientInfo,"select",e)},expression:"patientInfo.select"}}),n("v-text-field",{attrs:{"error-messages":t.heightErrors,maxlength:"3",label:"Рост"},on:{input:function(e){return t.$v.patientInfo.height.$touch()},blur:function(e){return t.$v.patientInfo.height.$touch()}},model:{value:t.patientInfo.height,callback:function(e){t.$set(t.patientInfo,"height",e)},expression:"patientInfo.height"}}),n("v-text-field",{staticClass:"mb-5",attrs:{"error-messages":t.weightErrors,maxlength:"3",label:"Вес"},on:{input:function(e){return t.$v.patientInfo.weight.$touch()},blur:function(e){return t.$v.patientInfo.weight.$touch()}},model:{value:t.patientInfo.weight,callback:function(e){t.$set(t.patientInfo,"weight",e)},expression:"patientInfo.weight"}}),n("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:t.submitHandler}},[t._v(" Сохранить ")]),n("v-btn",{on:{click:t.clear}},[t._v(" Очистить ")])],1)])},ht=[],pt=(n("466d"),n("5319"),20),vt={mixins:[G["validationMixin"]],validations:{patientInfo:{firstName:{required:K["required"],maxLength:Object(K["maxLength"])(pt)},lastName:{required:K["required"],maxLength:Object(K["maxLength"])(pt)},patronymic:{maxLength:Object(K["maxLength"])(pt)},snils:{required:K["required"],minLength:Object(K["minLength"])(14)},select:{required:K["required"]},birthday:{required:K["required"]},height:{validFormat:function(t){return/^\d+$/.test(t)}},weight:{validFormat:function(t){return/^\d+$/.test(t)}}}},data:function(){return{nameLength:pt,text:"Text",snackbar:!1,statusMessage:"",patientInfo:{birthday:null,lastName:"",firstName:"",patronymic:"",snils:"",height:"",weight:"",select:null,gender:["Мужской","Женский"]},menu:!1,current:null,isEdit:!1}},created:function(){if(this.isEdit=void 0!==this.$route.params.id,this.current=parseInt(this.$route.params.id),this.isEdit){console.log("watch",this.current);var t=this.patientById(this.current),e=t.birthday.split("-").reverse().join("-");this.patientInfo.firstName=t.firstName,this.patientInfo.lastName=t.lastName,this.patientInfo.patronymic=t.patronymic,this.patientInfo.snils=t.snils,this.patientInfo.height=t.height,this.patientInfo.weight=t.weight,this.patientInfo.select=t.gender,this.patientInfo.birthday=e}},computed:Object(r["a"])(Object(r["a"])({},Object(x["c"])({patientById:"patientById"})),{},{selectErrors:function(){var t=[];return this.$v.patientInfo.select.$dirty?(!this.$v.patientInfo.select.required&&t.push("Поле обязательно для заполнения"),t):t},birthdayErrors:function(){var t=[];return this.$v.patientInfo.birthday.$dirty?(!this.$v.patientInfo.birthday.required&&t.push("Поле обязательно для заполнения"),t):t},lastNameErrors:function(){var t=[];return this.$v.patientInfo.lastName.$dirty?(!this.$v.patientInfo.lastName.required&&t.push("Поле обязательно для заполнения"),!this.$v.patientInfo.lastName.maxLength&&t.push("Не больше ".concat(pt," символов")),t):t},firstNameErrors:function(){var t=[];return this.$v.patientInfo.firstName.$dirty?(!this.$v.patientInfo.firstName.required&&t.push("Поле обязательно для заполнения"),!this.$v.patientInfo.firstName.maxLength&&t.push("Не больше ".concat(pt," символов")),t):t},patronymicErrors:function(){var t=[];return this.$v.patientInfo.patronymic.$dirty?(!this.$v.patientInfo.patronymic.maxLength&&t.push("Не больше ".concat(pt," символов")),t):t},snilsErrors:function(){var t=[];return this.$v.patientInfo.snils.$dirty?(!this.$v.patientInfo.snils.required&&t.push("Поле обязательно для заполнения"),!this.$v.patientInfo.snils.minLength&&t.push("Введите корректный СНИЛС"),t):t},heightErrors:function(){var t=[];return this.$v.patientInfo.height.$dirty?(!this.$v.patientInfo.height.validFormat&&t.push("Некорректные данные, введите цифры"),t):t},weightErrors:function(){var t=[];return this.$v.patientInfo.weight.$dirty?(!this.$v.patientInfo.weight.validFormat&&t.push("Некорректные данные, введите цифры"),t):t},formattedBirthday:function(){return this.patientInfo.birthday?Object(Q["a"])(Object(R["a"])(this.patientInfo.birthday),"dd-MM-yyyy"):""},dateToday:function(){return Object(Q["a"])(Date.now(),"yyyy-MM-dd")}}),methods:{prepareFormData:function(){return{id:this.isEdit?this.current:Date.now(),lastName:this.patientInfo.lastName,firstName:this.patientInfo.firstName,patronymic:this.patientInfo.patronymic,snils:this.patientInfo.snils,height:this.patientInfo.height,weight:this.patientInfo.weight,gender:this.patientInfo.select,birthday:this.formattedBirthday}},showStatusMessage:function(t,e){var n={};n.text=e,n.status=t,n.snackbar=!0,this.$store.dispatch("showStatusMessage",n),console.log("show message",n)},submitHandler:function(){if(this.$v.$invalid)this.$v.$touch();else try{var t=this.prepareFormData();this.isEdit?(this.$store.dispatch("updatePatient",t),this.showStatusMessage("success","Данные успешно изменены!")):(this.$store.dispatch("createPatient",t),this.showStatusMessage("success","Данные успешно добавлены!")),this.goToPatientPage(t.id)}catch(e){console.log("Error",e),this.showStatusMessage("error","Ошибка")}},clear:function(){this.$v.$reset(),this.patientInfo.lastName="",this.patientInfo.firstName="",this.patientInfo.patronymic="",this.patientInfo.snils="",this.patientInfo.height="",this.patientInfo.weight="",this.patientInfo.select=null,this.patientInfo.birthday=null},validateSnils:function(){var t=this.patientInfo.snils.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/);this.patientInfo.snils=t[1],t[2]&&(this.patientInfo.snils=t[1]+"-"+t[2]),t[3]&&(this.patientInfo.snils=t[1]+"-"+t[2]+"-"+t[3]),t[4]&&(this.patientInfo.snils=t[1]+"-"+t[2]+"-"+t[3]+" "+t[4])},goToPatientPage:function(t){this.$router.push({name:"Patient",params:{id:t}})}}},bt=vt,yt=Object(d["a"])(bt,mt,ht,!1,null,"6821fc72",null),gt=yt.exports;m()(yt,{VBtn:v["a"],VContainer:b["a"],VDatePicker:Y["a"],VMenu:tt["a"],VSelect:et["a"],VTextField:M["a"]});var It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex align-center justify-center fill-height",staticStyle:{"background-color":"#ccc"}},[n("v-card",{staticClass:"d-flex flex-column align-center justify-center text-center",attrs:{height:"400",width:"400"}},[n("h1",{staticStyle:{"font-size":"100px",color:"#1976d2"}},[t._v("404")]),n("v-card-text",[n("p",[t._v("Страница не найдена")]),n("router-link",{attrs:{to:"/"}},[t._v("Перейдите на домашнюю страницу")])],1)],1)],1)},xt=[],$t={},Ct=$t,_t=Object(d["a"])(Ct,It,xt,!1,null,"780a0fce",null),kt=_t.exports;m()(_t,{VCard:T["a"],VCardText:D["a"]}),i["a"].use(O["a"]);var wt,St=[{path:"/",name:"Patients",component:J},{path:"/patient-add",name:"PatientAdd",component:gt},{path:"/patient-edit",name:"PatientEdit",component:gt},{path:"/patients/:id",name:"Patient",component:ft},{path:"/*",name:"notFound",component:kt}],Nt=new O["a"]({mode:"history",base:"/vue-consultation/",routes:St}),Ot=Nt,Vt=(n("c740"),n("a434"),[{id:1,lastName:"Иванов",firstName:"Иван",patronymic:"Иванович",birthday:"13-07-1955",gender:"Мужской",snils:"123-456-789 00",height:192,weight:86},{id:2,lastName:"Петров",firstName:"Пётр",patronymic:"Петрович",birthday:"13-07-1953",gender:"Мужской",snils:"145-131-111 12",height:182,weight:76},{id:3,lastName:"Петрова",firstName:"Мария",patronymic:"Петровна",birthday:"13-07-1983",gender:"Женский",snils:"125-111-111 13",height:172,weight:66}]),jt={state:{patients:JSON.parse(localStorage.getItem("patients"))||[]},mutations:{setPatients:function(t,e){t.patients=e,localStorage.setItem("patients",JSON.stringify(t.patients))},createPatient:function(t,e){t.patients.push(e),localStorage.setItem("patients",JSON.stringify(t.patients))},updatePatient:function(t,e){var n=t.patients.find((function(t){return t.id===e.id}));n.firstName=e.firstName,n.lastName=e.lastName,n.patronymic=e.patronymic,n.snils=e.snils,n.height=e.height,n.weight=e.weight,n.select=e.gender,n.birthday=e.birthday,localStorage.setItem("patients",JSON.stringify(t.patients))},deletePatient:function(t,e){var n=t.patients.findIndex((function(t){return t.id===e}));t.patients.splice(n,1),localStorage.setItem("patients",JSON.stringify(t.patients))}},actions:{fetchPatients:function(t){var e=t.commit;e("setPatients",Vt)},createPatient:function(t,e){var n=t.commit;n("createPatient",e)},updatePatient:function(t,e,n){var i=t.commit;i("updatePatient",e)},deletePatient:function(t,e){var n=t.commit;n("deletePatient",e)}},getters:{patients:function(t){return t.patients},patientById:function(t){return function(e){return t.patients.find((function(t){return t.id===parseInt(e)}))}}}},Pt=[{id:1,specialist:"Невролог",day:"15-07-2021",time:"08:30",symptoms:"болят глаза",idUser:1},{id:2,specialist:"Гастроэнтеролог",day:"16-07-2021",time:"09:30",symptoms:"болит поясница",idUser:2},{id:3,specialist:"Терапевт",day:"19-07-2021",time:"08:30",symptoms:"кашель, головная боль",idUser:3},{id:4,specialist:"Терапевт",day:"20-07-2021",time:"08:30",symptoms:"кашель, головная боль",idUser:1}],Et={state:{addConsultationDialogVisible:!1,consultations:null!==(wt=JSON.parse(localStorage.getItem("consultations")))&&void 0!==wt?wt:[],currentConsultationId:null},mutations:{showConsultationDialog:function(t,e){t.addConsultationDialogVisible=!0,t.currentConsultationId=e},hideConsultationDialog:function(t){t.addConsultationDialogVisible=!1,t.currentConsultationId=null},setConsultations:function(t,e){t.consultations=e,localStorage.setItem("consultations",JSON.stringify(t.consultations))},createConsultation:function(t,e){t.consultations.push(e),localStorage.setItem("consultations",JSON.stringify(t.consultations))},updateConsultation:function(t,e){var n=t.consultations.find((function(t){return t.id===e.id}));n.specialist=e.specialist,n.day=e.day,n.time=e.time,n.symptoms=e.symptoms,localStorage.setItem("consultations",JSON.stringify(t.consultations))},deleteConsultation:function(t,e){var n=t.consultations.findIndex((function(t){return t.id===e}));t.consultations.splice(n,1),localStorage.setItem("consultations",JSON.stringify(t.consultations))}},actions:{fetchConsultation:function(t){var e=t.commit;e("setConsultations",Pt)},createConsultation:function(t,e){var n=t.commit;n("createConsultation",e)},updateConsultation:function(t,e){var n=t.commit;n("updateConsultation",e)},deleteConsultation:function(t,e){var n=t.commit;n("deleteConsultation",e)}},getters:{addConsultationDialogVisible:function(t){return t.addConsultationDialogVisible},consultationsByUser:function(t){return function(e){return t.consultations.filter((function(t){return t.idUser===parseInt(e)}))}},consultations:function(t){return t.consultations},currentConsultationId:function(t){return t.currentConsultationId},consultationById:function(t){return function(e){return t.consultations.find((function(t){return t.id===parseInt(e)}))}}}};i["a"].use(x["a"]);var Tt=new x["a"].Store({state:{infoStatus:{}},mutations:{showStatusMessage:function(t,e){t.infoStatus.text=e.text,t.infoStatus.status=e.status,t.infoStatus.snackbar=e.snackbar}},actions:{showStatusMessage:function(t,e){var n=t.commit;n("showStatusMessage",e)}},getters:{infoStatus:function(t){return t.infoStatus}},modules:{patient:jt,consultation:Et}}),Dt=n("f309");i["a"].use(Dt["a"],{iconfont:"mdi"});var qt=new Dt["a"]({});i["a"].use(z.a),i["a"].config.productionTip=!1,new i["a"]({router:Ot,store:Tt,vuetify:qt,render:function(t){return t(N)}}).$mount("#app")},bf9f:function(t,e,n){"use strict";n("070c")}});
//# sourceMappingURL=app.ee946b68.js.map